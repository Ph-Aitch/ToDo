(()=>{"use strict";var __webpack_modules__={134:()=>{eval('\n;// ./src/theme.js\nconst theme = (() => {\r\n    const themeToggle = document.querySelector("#toggler")\r\n    themeToggle.addEventListener("click", () => {\r\n        const test = document.body.dataset.theme\r\n        if (test === ``) {\r\n            document.body.dataset.theme = "dark"\r\n            themeToggle.innerHTML = `<span class="mdi mdi-white-balance-sunny"></span>`\r\n        } else {\r\n            document.body.dataset.theme = ""\r\n            themeToggle.innerHTML = `<span class="mdi mdi-weather-night"></span>`\r\n        }\r\n    })\r\n})\n;// ./src/task.js\n\r\n\r\n\r\nconst taskData = []\r\nconst taskId = { value: 0 }\r\n\r\nconst taskControl = (() => {\r\n    class task {\r\n        constructor(name, project, description, priority, importance, dueDate, id) {\r\n            this.name = name\r\n            this.project = project\r\n            this.description = description\r\n            this.priority = priority\r\n            this.importance = importance\r\n            this.dueDate = dueDate\r\n            this.id = id\r\n            this.finished = false\r\n            this.dlt = `<span class="mdi mdi-delete-outline"></span>`\r\n            this.edit = `<span class="mdi mdi-delete-outline"></span>`\r\n        }\r\n    }\r\n\r\n    const addTask = document.querySelector("#add_task")\r\n    const task_dialog = document.querySelector("#dialog")\r\n\r\n    addTask.addEventListener("click", () => {\r\n        if (projectData.length === 0) {\r\n            alert("You must create a project first")\r\n            const addPro = document.querySelector("#add_project")\r\n            addPro.click()\r\n        } else {\r\n            task_dialog.innerHTML =\r\n                `<form action="#" class="form" id="form">\r\n            <h1>Create Task</h1>\r\n            <label for="name">Title:</label>\r\n            <input type="text" autocomplete="off" required autofocus id="name" maxlength="20">\r\n            <label for="description">Description:</label>\r\n            <textarea required autocomplete="off" id="description"></textarea>\r\n            <label for="due_date">Due Date:</label>\r\n            <input required type="date" id="due_date">\r\n            <label for="priority">Priority:</label>\r\n            <select required id="priority">\r\n                <option value="" disabled selected>Select Priority</option>\r\n                <option value="none">None</option>\r\n                <option value="low">Low</option>\r\n                <option value="mid">Mid</option>\r\n                <option value="high">High</option>\r\n                <option value="crit">Critical</option>\r\n            </select>\r\n            <label for="task_project">Project:</label>\r\n            <select required id="task_project">\r\n                <option value="" disabled selected>Select Project</option>${projectOptions()}\r\n            </select>\r\n             <label for="importance">Important:</label>\r\n            <input type="checkbox" id="importance">\r\n            <button type="submit">Add Task</button>\r\n            </form>\r\n            <div class="close" id="close_dia"><span class="mdi mdi-close"></span></div>`\r\n            task_dialog.classList.toggle("taskDia", true)\r\n            task_dialog.showModal()\r\n\r\n            const close = document.querySelector("#close_dia")\r\n            const task_form = document.querySelector("#form")\r\n            task_dialog.addEventListener("click", (e) => {\r\n                if (e.target === task_dialog) {\r\n                    task_dialog.close()\r\n                    task_dialog.classList.toggle("taskDia", false)\r\n                }\r\n            })\r\n            close.addEventListener("click", () => {\r\n                task_dialog.close()\r\n                task_dialog.classList.toggle("taskDia", false)\r\n            })\r\n\r\n            task_form.addEventListener("submit", (e) => {\r\n                e.preventDefault()\r\n                createTask()\r\n                task_form.reset()\r\n                task_dialog.close()\r\n                task_dialog.classList.toggle("taskDia", false)\r\n            })\r\n        }\r\n    })\r\n\r\n    function createTask() {\r\n        const taskName = document.querySelector("#name")\r\n        const taskDesc = document.querySelector("#description")\r\n        const taskDate = document.querySelector("#due_date")\r\n        const taskPrio = document.querySelector("#priority")\r\n        const taskProj = document.querySelector("#task_project")\r\n        const taskImpo = document.querySelector("#importance")\r\n\r\n        const regex = /^\\s*$/g\r\n        const test = taskData.some(task => task.name === taskName.value.trim())\r\n        if (regex.test(taskName.value.trim()) || test) {\r\n            alert("A Task With The Same Name Exists\\nOr You Entered An Invalid Name\\nPlease Enter Another Name")\r\n            taskName.value = ``\r\n        } else {\r\n            const tsk = new task(taskName.value, taskProj.value, taskDesc.value, taskPrio.value, taskImpo.checked, new Date(taskDate.value), taskId.value)\r\n            taskData.push(tsk)\r\n            taskId.value++\r\n            save()\r\n            updateGrid(document.querySelector(".active"))\r\n            const projects = Array.from(document.querySelectorAll(".project"))\r\n            const pro = projects.find(pro => pro.querySelector("p").textContent === tsk.project)\r\n            projectFinish(pro)\r\n        }\r\n    }\r\n})\r\n\r\nfunction formatDate(date) {\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, \'0\');\r\n    const day = String(date.getDate()).padStart(2, \'0\');\r\n    return `${year}-${month}-${day}`;\r\n}\r\n\r\nfunction renderTask(task) {\r\n    const taskContent = document.querySelector("#task_content")\r\n    const taskCard = document.createElement("div")\r\n    taskCard.className = "task-card"\r\n    taskCard.dataset.taskId = task.id\r\n    taskCard.innerHTML =\r\n        `<div class="title">\r\n                    <p>${task.name}</p>\r\n                    <div class="btns">\r\n                        <div class = "task-finished" title = "Finished"><span class="mdi mdi-check-decagram-outline"></span></div>\r\n                        ${task.importance ? `<div class="impo flag">\r\n                            <span class="mdi mdi-star"></span>\r\n                        </div>` : `<div class="impo" id="impo">\r\n                            <span class="mdi mdi-star-outline"></span>\r\n                        </div>` }\r\n                        <div class="edit-task"><span class="mdi mdi-pencil"></span></div>\r\n                        <div class="dlt-task"><span class="mdi mdi-delete-outline"></span></div>\r\n                    </div>\r\n                </div>\r\n                <span>project: ${task.project}</span>\r\n                <div class="task-desc">\r\n                    ${task.description}\r\n                </div>\r\n                <div class="info">\r\n                    <div class="prio ${task.priority}">${task.priority === "crit" ? "Critical" : task.priority}</div>\r\n                    <div class="date">${formatDate(task.dueDate)}</div>\r\n                </div>\r\n                <div class="overlay" ${task.finished ? \'style="display: flex;"\' : \'\'}><span class="mdi mdi-check-decagram"></span></div>`\r\n    const dlt = taskCard.querySelector(".dlt-task")\r\n    dlt.addEventListener("click", () => {\r\n        const confirmation = confirm("do you really want to delete this task?")\r\n        if (confirmation) {\r\n            const remove = taskData.findIndex(task => task.id === Number(taskCard.dataset.taskId))\r\n            taskData.splice(remove, 1)\r\n            save()\r\n            taskCard.remove()\r\n            const projects = Array.from(document.querySelectorAll(".project"))\r\n            const pro = projects.find(pro => pro.querySelector("p").textContent === task.project)\r\n            projectFinish(pro)\r\n        }\r\n    })\r\n    const importance = taskCard.querySelector(".impo")\r\n    importance.addEventListener("click", () => {\r\n        let impo = taskData.find(task => task.id === Number(taskCard.dataset.taskId))\r\n        if (importance.classList.contains("flag")) {\r\n            importance.classList.toggle("flag")\r\n            importance.innerHTML = `<span class="mdi mdi-star-outline"></span>`\r\n            impo.importance = !impo.importance\r\n        } else {\r\n            importance.classList.toggle("flag")\r\n            importance.innerHTML = `<span class="mdi mdi-star"></span>`\r\n            impo.importance = !impo.importance\r\n        }\r\n        save()\r\n        updateGrid(document.querySelector(".active"))\r\n    })\r\n    const finish = taskCard.querySelector(".task-finished")\r\n    finish.addEventListener("click", () => {\r\n        overlay.style.display = "flex"\r\n        task.finished = true\r\n        const projects = Array.from(document.querySelectorAll(".project"))\r\n        const pro = projects.find(pro => pro.querySelector("p").textContent === task.project)\r\n        projectFinish(pro)\r\n        save()\r\n    })\r\n    const overlay = taskCard.querySelector(".overlay")\r\n    overlay.addEventListener("click", () => {\r\n        overlay.style.display = ""\r\n        task.finished = false\r\n        const projects = Array.from(document.querySelectorAll(".project"))\r\n        const pro = projects.find(pro => pro.querySelector("p").textContent === task.project)\r\n        projectFinish(pro)\r\n        save()\r\n    })\r\n    const editTask = taskCard.querySelector(".edit-task")\r\n    editTask.addEventListener("click", editTaskData)\r\n    taskContent.appendChild(taskCard)\r\n}\r\n\r\nfunction editTaskData(e) {\r\n    const task_dialog = document.querySelector("#dialog")\r\n    const taskCard = e.target.closest(".task-card")\r\n    const task = taskData.find(task => task.id === Number(taskCard.dataset.taskId))\r\n    const formattedDueDate = task.dueDate.toISOString().split(\'T\')[0]\r\n    task_dialog.innerHTML =\r\n        `<form action="#" class="form" id="form">\r\n            <h1>Edit Task</h1>\r\n            <label for="name">Title:</label>\r\n            <input type="text" autocomplete="off" required autofocus id="name" maxlength="20" value="${task.name}">\r\n            <label for="description">Description:</label>\r\n            <textarea required autocomplete="off" id="description" >${task.description}</textarea>\r\n            <label for="due_date">Due Date:</label>\r\n            <input required type="date" id="due_date" value="${formattedDueDate}">\r\n            <label for="priority">Priority:</label>\r\n            <select required id="priority">\r\n                <option value="" disabled >Select Priority</option>\r\n                <option value="none" ${task.priority === "none" ? "selected" : ""} >None</option>\r\n                <option value="low" ${task.priority === "low" ? "selected" : ""}>Low</option>\r\n                <option value="mid" ${task.priority === "mid" ? "selected" : ""}>Mid</option>\r\n                <option value="high" ${task.priority === "high" ? "selected" : ""}>High</option>\r\n                <option value="crit" ${task.priority === "crit" ? "selected" : ""}>Critical</option>\r\n            </select>\r\n            <label for="task_project">Project:</label>\r\n            <select required id="task_project">\r\n                <option value="" disabled selected>Select Project</option>${projectOptions()}\r\n            </select>\r\n             <label for="importance">Important:</label>\r\n            <input type="checkbox" id="importance" ${task.importance ? \'checked\' : \'\'}>\r\n            <button type="submit">Edit Task</button>\r\n            </form>\r\n            <div class="close" id="close_dia"><span class="mdi mdi-close"></span></div>`\r\n    task_dialog.classList.toggle("taskDia", true)\r\n    task_dialog.showModal()\r\n\r\n    const close = document.querySelector("#close_dia")\r\n    const task_form = document.querySelector("#form")\r\n    const edit_input = document.querySelector("#name")\r\n    task_dialog.addEventListener("click", (e) => {\r\n        if (e.target === task_dialog) {\r\n            task_dialog.close()\r\n            task_dialog.classList.toggle("taskDia", false)\r\n        }\r\n    })\r\n    close.addEventListener("click", () => {\r\n        task_dialog.close()\r\n        task_dialog.classList.toggle("taskDia", false)\r\n    })\r\n\r\n    task_form.addEventListener("submit", (e) => {\r\n        e.preventDefault()\r\n        editTaskSelected(edit_input.value.trim(), taskCard, task)\r\n        task_form.reset()\r\n        task_dialog.close()\r\n        task_dialog.classList.toggle("taskDia", false)\r\n    })\r\n}\r\n\r\nfunction editTaskSelected(newName, taskCard, task) {\r\n    const taskName = document.querySelector("#name")\r\n    const taskDesc = document.querySelector("#description")\r\n    const taskDate = document.querySelector("#due_date")\r\n    const taskPrio = document.querySelector("#priority")\r\n    const taskProj = document.querySelector("#task_project")\r\n    const taskImpo = document.querySelector("#importance")\r\n\r\n    const test = taskData.some(task => task.name === newName.trim())\r\n    const regex = /^\\s*$/\r\n\r\n    if (test || regex.test(newName)) {\r\n        alert("A Project With The Same Name Exists\\nOr You Entered An Invalid Name\\nPlease Enter Another Name")\r\n        document.querySelector("#name").value = ``\r\n    } else {\r\n        task.name = taskName.value.trim()\r\n        task.importance = taskImpo.checked\r\n        task.project = taskProj.value.trim()\r\n        task.description = taskDesc.value.trim()\r\n        task.priority = taskPrio.value\r\n        task.date = new Date(taskDate.value)\r\n        save()\r\n        taskCard.innerHTML =\r\n            `<div class="title">\r\n                    <p>${task.name}</p>\r\n                    <div class="btns">\r\n                        <div class = "task-finished" title = "Finished"><span class="mdi mdi-check-decagram-outline"></span></div>\r\n                        ${task.importance ? `<div class="impo flag">\r\n                            <span class="mdi mdi-star"></span>\r\n                        </div>` : `<div class="impo" id="impo">\r\n                            <span class="mdi mdi-star-outline"></span>\r\n                        </div>` }\r\n                        <div class="edit-task"><span class="mdi mdi-pencil"></span></div>\r\n                        <div class="dlt-task"><span class="mdi mdi-delete-outline"></span></div>\r\n                    </div>\r\n                </div>\r\n                <span>project: ${task.project}</span>\r\n                <div class="task-desc">\r\n                    ${task.description}\r\n                </div>\r\n                <div class="info">\r\n                    <div class="prio ${task.priority}">${task.priority === "crit" ? "Critical" : task.priority}</div>\r\n                    <div class="date">${formatDate(task.dueDate)}</div>\r\n                </div>\r\n                <div class="overlay" ${task.finished ? \'style="display: flex;"\' : \'\'}><span class="mdi mdi-check-decagram"></span></div>`\r\n        const dlt = taskCard.querySelector(".dlt-task")\r\n        dlt.addEventListener("click", () => {\r\n            const confirmation = confirm("do you really want to delete this task?")\r\n            if (confirmation) {\r\n                const remove = taskData.findIndex(task => task.id === Number(taskCard.dataset.taskId))\r\n                taskData.splice(remove, 1)\r\n                save()\r\n                taskCard.remove()\r\n            }\r\n        })\r\n        const importance = taskCard.querySelector(".impo")\r\n        importance.addEventListener("click", () => {\r\n            let impo = taskData.find(task => task.id === Number(taskCard.dataset.taskId))\r\n            if (importance.classList.contains("flag")) {\r\n                importance.classList.toggle("flag")\r\n                importance.innerHTML = `<span class="mdi mdi-star-outline"></span>`\r\n                impo.importance = !impo.importance\r\n            } else {\r\n                importance.classList.toggle("flag")\r\n                importance.innerHTML = `<span class="mdi mdi-star"></span>`\r\n                impo.importance = !impo.importance\r\n            }\r\n            save()\r\n            updateGrid(document.querySelector(".active"))\r\n        })\r\n        const finish = taskCard.querySelector(".task-finished")\r\n        finish.addEventListener("click", () => {\r\n            overlay.style.display = "flex"\r\n            task.finished = true\r\n            const projects = Array.from(document.querySelectorAll(".project"))\r\n            const pro = projects.find(pro => pro.querySelector("p").textContent === task.project)\r\n            projectFinish(pro)\r\n            save()\r\n        })\r\n        const overlay = taskCard.querySelector(".overlay")\r\n        overlay.addEventListener("click", () => {\r\n            overlay.style.display = ""\r\n            task.finished = false\r\n            const projects = Array.from(document.querySelectorAll(".project"))\r\n            const pro = projects.find(pro => pro.querySelector("p").textContent === task.project)\r\n            projectFinish(pro)\r\n            save()\r\n        })\r\n        const editTask = taskCard.querySelector(".edit-task")\r\n        editTask.addEventListener("click", editTaskData)\r\n        document.querySelector("#form").reset()\r\n        document.querySelector("#dialog").close()\r\n        updateGrid(document.querySelector(".active"))\r\n    }\r\n}\r\n\r\nconst projectOptions = function turnProjectsIntoOptions() {\r\n    const options = projectData.map(pro => `<option value="${pro.name}">${pro.name}</option>`)\r\n    return options.join("")\r\n}\n;// ./src/screen.js\n\r\n\r\n\r\n\r\nconst display = (() => {\r\n    updateNav()\r\n    document.addEventListener("click", (e) => {\r\n        const projects = Array.from(document.querySelectorAll(".project"))\r\n        const tabs = Array.from(document.querySelectorAll(".tab"))\r\n        switch (e.target.className) {\r\n            case "project":\r\n            case "tab":\r\n            case "project finished":\r\n                projects.forEach(pro => pro.classList.toggle("active", false))\r\n                tabs.forEach(tab => tab.classList.toggle("active", false))\r\n                e.target.classList.toggle("active", true)\r\n                updateNav()\r\n                updateGrid(document.querySelector(".active"))\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    })\r\n})\r\n\r\nfunction updateGrid(tab) {\r\n    const content = document.querySelector("#task_content")\r\n    const today = new Date()\r\n    const oneWeekFromNow = new Date();\r\n    const yesterday = new Date()\r\n    switch (tab.id) {\r\n        case "all_tasks":\r\n            content.innerHTML = ``\r\n            taskData.forEach(task => renderTask(task))\r\n            document.querySelector(".active").click()\r\n            break;\r\n        case "today_tasks":\r\n            content.innerHTML = ``\r\n            const todayTasks = taskData.filter(task => task.dueDate.getDate() === today.getDate() && task.dueDate.getMonth() === today.getMonth() && task.dueDate.getFullYear() === today.getFullYear())\r\n            todayTasks.forEach(task => renderTask(task))\r\n            break;\r\n        case "this_week_tasks":\r\n            content.innerHTML = ``\r\n            oneWeekFromNow.setDate(today.getDate() + 7)\r\n            yesterday.setDate(today.getDate()-1)\r\n            const weekTasks = taskData.filter(task => task.dueDate >= yesterday && task.dueDate <= oneWeekFromNow)\r\n            weekTasks.forEach(task => renderTask(task))\r\n            break;\r\n        case "important_tasks":\r\n            content.innerHTML = ``\r\n            const importantTasks = taskData.filter(task => task.importance === true)\r\n            importantTasks.forEach(task => renderTask(task))\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    if (tab.classList.contains("project")) {\r\n        content.innerHTML = ``\r\n        const projectTasks = taskData.filter(task => task.project === tab.querySelector("p").textContent)\r\n        projectTasks.forEach(task => renderTask(task))\r\n    }\r\n}\r\n\r\nfunction updateNav() {\r\n    const navbar = document.querySelector("#navbar")\r\n    const Selected = document.querySelector(".active")\r\n    if (Selected.classList.contains("project")) {\r\n        navbar.innerHTML = `<h1><span class="edit mdi mdi-pencil"></span> ${Selected.textContent.trim()}</h1>`\r\n        const editBtn = document.querySelector("#navbar .edit")\r\n        editBtn.addEventListener("click", edit)\r\n    } else if (Selected.classList.contains("tab")) {\r\n        navbar.innerHTML = `<h1>${Selected.textContent.trim()}</h1>`\r\n    } else {\r\n        navbar.innerHTML = ``\r\n    }\r\n}\r\n\r\nfunction edit() {\r\n    const edit_project_dialog = document.querySelector("#dialog")\r\n    edit_project_dialog.innerHTML = `<form action="#" id="form" class="form">\r\n    <h1>Edit Project</h1>\r\n    <label for="name">Edit Name</label>\r\n    <input type="text" autocomplete="off" required autofocus id="name" maxlength="20">\r\n    <button type="submit">Edit Project</button>\r\n    </form>\r\n    <div class="close" id="close_dia"><span class="mdi mdi-close"></span></div>`\r\n    edit_project_dialog.showModal()\r\n    const edit_project_form = document.querySelector("#form")\r\n    const edit_input = document.querySelector("#name")\r\n    const close_edit = document.querySelector("#close_dia")\r\n\r\n    edit_project_dialog.addEventListener("click", (e) => {\r\n        if (e.target === edit_project_dialog) {\r\n            edit_project_dialog.close()\r\n        }\r\n    })\r\n    close_edit.addEventListener("click", () => {\r\n        edit_project_dialog.close()\r\n    })\r\n\r\n    edit_project_form.onsubmit = (e) => {\r\n        e.preventDefault()\r\n        editSelection(edit_input.value.trim())\r\n        save()\r\n    }\r\n}\r\n\r\nfunction editSelection(newName) {\r\n    const projects = document.querySelector("#project_content")\r\n    const test = projectData.some(pro => pro.name === newName.trim())\r\n    const regex = /^\\s*$/\r\n\r\n    if (test || regex.test(newName)) {\r\n        alert("A Project With The Same Name Exists\\nOr You Entered An Invalid Name\\nPlease Enter Another Name")\r\n        document.querySelector("#name").value = ``\r\n    } else {\r\n        const project = projects.querySelector(".active")\r\n        const pro = projectData.find(pro => pro.id === Number(project.dataset.projectId))\r\n        pro.name = String(newName.trim())\r\n        const tsk = taskData.forEach(task => task.project === project.querySelector("p").textContent ? task.project = String(newName.trim()): task)\r\n        project.querySelector("p").textContent = newName.trim()\r\n        document.querySelector("#form").reset()\r\n        document.querySelector("#dialog").close()\r\n        save()\r\n        updateNav()\r\n        updateGrid(document.querySelector(".active"))\r\n    }\r\n}\n;// ./src/save&load.js\n\r\n\r\n\r\n\r\nfunction save() {\r\n    localStorage.setItem("projectData", JSON.stringify(projectData))\r\n    localStorage.setItem("projectId", JSON.stringify(projectId))\r\n    localStorage.setItem("taskId", JSON.stringify(taskId))\r\n    const taskDataWithStringDates = taskData.map(task => {\r\n        return { ...task, dueDate: task.dueDate.toISOString() }\r\n    })\r\n    localStorage.setItem(\'taskData\', JSON.stringify(taskDataWithStringDates));\r\n}\r\n\r\nfunction load() {\r\n    const savedProjectData = localStorage.getItem(\'projectData\')\r\n    const savedProjectId = localStorage.getItem(\'projectId\')\r\n    const savedTaskId = localStorage.getItem(\'taskId\')\r\n    const savedTaskData = localStorage.getItem(\'taskData\')\r\n\r\n    if (savedProjectId) {\r\n        projectId.value = JSON.parse(savedProjectId).value\r\n    }\r\n\r\n    if (savedTaskId) {\r\n        taskId.value = JSON.parse(savedTaskId).value\r\n    }\r\n\r\n    if (savedTaskData) {\r\n        const parsedTaskData = JSON.parse(savedTaskData)\r\n        const taskDataWithDateObjs = parsedTaskData.map(task => { return { ...task, dueDate: new Date(task.dueDate) } })\r\n        taskData.push(...taskDataWithDateObjs)\r\n        updateGrid(document.querySelector(".active"))\r\n    }\r\n\r\n    if (savedProjectData) {\r\n        projectData.push(...JSON.parse(savedProjectData))\r\n        projectData.forEach(pro => render(pro))\r\n    }\r\n}\n;// ./src/project.js\n\r\n\r\n\r\n\r\nconst projectData = []\r\nconst projectId = { value: 0 }\r\n\r\nconst projectControl = (() => {\r\n    class project {\r\n        constructor(name, id) {\r\n            this.name = name\r\n            this.dlt = `<span class="mdi mdi-delete-outline"></span>`\r\n            this.id = id\r\n            this.finished = false\r\n        }\r\n    }\r\n\r\n\r\n    const addProject = document.querySelector("#add_project")\r\n    const project_dialog = document.querySelector("#dialog")\r\n\r\n    addProject.addEventListener("click", () => {\r\n        project_dialog.innerHTML = `<form action="#" id="form" class="form">\r\n        <h1>Create Project</h1>\r\n        <label for="name">Project Name</label>\r\n        <input type="text" autocomplete="off" required autofocus id="name" maxlength="20">\r\n        <button type="submit">Add Project</button>\r\n        </form>\r\n        <div class="close" id="close_dia"><span class="mdi mdi-close"></span></div>`\r\n        project_dialog.showModal()\r\n\r\n        const close = document.querySelector("#close_dia")\r\n        const project_form = document.querySelector("#form")\r\n        project_dialog.addEventListener("click", (e) => {\r\n            if (e.target === project_dialog) {\r\n                project_dialog.close()\r\n            }\r\n        })\r\n        close.addEventListener("click", () => {\r\n            project_dialog.close()\r\n        })\r\n\r\n        project_form.addEventListener("submit", (e) => {\r\n            e.preventDefault()\r\n            createProject()\r\n            save()\r\n            project_form.reset()\r\n            project_dialog.close()\r\n        })\r\n    })\r\n\r\n    function createProject() {\r\n        const input = document.querySelector("#name")\r\n        const regex = /^\\s*$/g\r\n        const test = projectData.some(project => project.name === input.value.trim())\r\n        if (regex.test(input.value.trim()) || test) {\r\n            alert("A Project With The Same Name Exists\\nOr You Entered An Invalid Name\\nPlease Enter Another Name")\r\n            input.value = ``\r\n        } else {\r\n            const pro = new project(input.value.trim(), projectId.value);\r\n            projectData.push(pro)\r\n            projectId.value++\r\n            save()\r\n            render(pro)\r\n        }\r\n    }\r\n\r\n})\r\n\r\nfunction render(pro) {\r\n    const projectContent = document.querySelector("#project_content")\r\n    const project = document.createElement("div")\r\n    const name = document.createElement("p")\r\n    const dlt = document.createElement("div")\r\n    project.innerHTML +=\r\n        `<svg class="circle" id="pieChart"><circle class="fill"/></svg>`\r\n    project.className = "project"\r\n    project.dataset.projectId = pro.id\r\n    name.textContent = pro.name\r\n    dlt.innerHTML = pro.dlt\r\n    dlt.className = "dlt"\r\n    dlt.addEventListener("click", () => {\r\n        const confirmation = confirm("Do you really want to delete this project?")\r\n        if (confirmation) {\r\n            const confirmation2 = confirm("You will also remove all assosiated TASKs with this project")\r\n            if (confirmation2) {\r\n                const remove = projectData.findIndex(pro => pro.id === Number(project.dataset.projectId))\r\n                projectData.splice(remove, 1)\r\n                const newTaskData = taskData.filter(task => task.project !== project.querySelector("p").textContent)\r\n                taskData.length = 0\r\n                newTaskData.forEach(task => taskData.push(task))\r\n                project.remove()\r\n                projectData.length === 0 ? document.querySelector(".tab").click() : document.querySelector(".project").click()\r\n                updateGrid(document.querySelector(".active"))\r\n                save()\r\n            }\r\n        }\r\n    })\r\n    project.appendChild(name)\r\n    project.appendChild(dlt)\r\n    projectContent.appendChild(project)\r\n    projectFinish(project)\r\n}\r\n\r\nfunction projectFinish(pro) {\r\n    const tasksCount = taskData.filter(task => task.project === pro.querySelector("p").textContent).length\r\n    const taskFinishedCount = taskData.filter(task => task.project === pro.querySelector("p").textContent && task.finished === true).length\r\n    const project = projectData.find(proj => proj.name === pro.querySelector("p").textContent)\r\n    if (tasksCount === 0) {\r\n        pro.classList.toggle("finished", false)\r\n        project.finished = false\r\n        const circle = pro.querySelector("svg circle")\r\n        const svg = pro.querySelector("svg")\r\n        svg.style.border = ``\r\n        circle.setAttribute("stroke-dashoffset", `55px`)\r\n    } else if (tasksCount > 0 && tasksCount !== taskFinishedCount) {\r\n        project.finished = false\r\n        pro.classList.toggle("finished", false)\r\n        const circle = pro.querySelector("svg circle")\r\n        const svg = pro.querySelector("svg")\r\n        svg.style.border = ``\r\n        const newOffset = `${55 * (1 - taskFinishedCount / tasksCount)}px`\r\n        circle.setAttribute("stroke-dashoffset", newOffset)\r\n    } else if (tasksCount === taskFinishedCount) {\r\n        project.finished = true\r\n        pro.classList.toggle("finished", true)\r\n        const circle = pro.querySelector("svg circle")\r\n        const svg = pro.querySelector("svg")\r\n        circle.setAttribute("stroke-dashoffset", `0px`)\r\n        svg.style.border = `2px solid var(--secondry-bg)`\r\n    } \r\n}\n;// ./src/index.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction init() {\r\n    load()\r\n    theme()\r\n    projectControl()\r\n    display()\r\n    taskControl()\r\n}\r\n\r\ninit()//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM0LmpzIiwibWFwcGluZ3MiOiI7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUMsQzs7QUNad0Q7QUFDcEI7QUFDRztBQUNqQztBQUNBLGlCQUFpQjtBQUN4QjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsWUFBWSxJQUFJO0FBQ2hCLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsS0FBSyxHQUFHLE1BQU0sR0FBRyxJQUFJO0FBQ25DO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixVQUFVO0FBQ25DO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxhQUFhO0FBQzlDO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSx1Q0FBdUMsY0FBYyxJQUFJLHNEQUFzRDtBQUMvRyx3Q0FBd0MseUJBQXlCO0FBQ2pFO0FBQ0EsdUNBQXVDLHNDQUFzQyxRQUFRO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksSUFBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxZQUFZLGFBQWE7QUFDekI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLElBQUk7QUFDWixRQUFRLFVBQVU7QUFDbEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsYUFBYTtBQUNyQixRQUFRLElBQUk7QUFDWixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxhQUFhO0FBQ3JCLFFBQVEsSUFBSTtBQUNaLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUdBQXVHLFVBQVU7QUFDakg7QUFDQSxzRUFBc0UsaUJBQWlCO0FBQ3ZGO0FBQ0EsK0RBQStELGlCQUFpQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsNENBQTRDO0FBQ25GLHNDQUFzQywwQ0FBMEM7QUFDaEYsc0NBQXNDLDBDQUEwQztBQUNoRix1Q0FBdUMsMkNBQTJDO0FBQ2xGLHVDQUF1QywyQ0FBMkM7QUFDbEY7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFO0FBQzVFO0FBQ0E7QUFDQSxxREFBcUQsaUNBQWlDO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsSUFBSTtBQUNaO0FBQ0E7QUFDQSx5QkFBeUIsVUFBVTtBQUNuQztBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsYUFBYTtBQUM5QztBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsdUNBQXVDLGNBQWMsSUFBSSxzREFBc0Q7QUFDL0csd0NBQXdDLHlCQUF5QjtBQUNqRTtBQUNBLHVDQUF1QyxzQ0FBc0MsUUFBUTtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsSUFBSTtBQUNwQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxJQUFJO0FBQ2hCLFlBQVksVUFBVTtBQUN0QixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCLFlBQVksSUFBSTtBQUNoQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCLFlBQVksSUFBSTtBQUNoQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLFVBQVU7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVyw4QkFBOEIsU0FBUyxJQUFJLFNBQVM7QUFDbkY7QUFDQSxDOztBQ2pXMEM7QUFDTDtBQUNXO0FBQ2hEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsaUJBQWlCLFVBQVU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsUUFBUTtBQUN2Qyx1Q0FBdUMsVUFBVTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLFFBQVE7QUFDdEMsc0NBQXNDLFVBQVU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVE7QUFDM0MsMkNBQTJDLFVBQVU7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLFFBQVE7QUFDckMscUNBQXFDLFVBQVU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsNEJBQTRCO0FBQ3hHO0FBQ0E7QUFDQSxNQUFNO0FBQ04sa0NBQWtDLDRCQUE0QjtBQUM5RCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsSUFBSTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsV0FBVztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxRQUFRLElBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxDOztBQy9IOEQ7QUFDckI7QUFDSTtBQUM3QztBQUNPO0FBQ1AsdURBQXVELFdBQVc7QUFDbEUscURBQXFELFNBQVM7QUFDOUQsa0RBQWtELE1BQU07QUFDeEQsb0NBQW9DLFFBQVE7QUFDNUMsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsU0FBUztBQUNqQjtBQUNBO0FBQ0E7QUFDQSxRQUFRLE1BQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxTQUFTLDRDQUE0QztBQUN2SCxRQUFRLFFBQVE7QUFDaEIsUUFBUSxVQUFVO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLFFBQVEsV0FBVztBQUNuQixRQUFRLFdBQVcsZ0JBQWdCLE1BQU07QUFDekM7QUFDQSxDOztBQ3ZDcUM7QUFDRztBQUNKO0FBQ3BDO0FBQ087QUFDQSxvQkFBb0I7QUFDM0I7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksSUFBSTtBQUNoQjtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFlBQVksSUFBSTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVE7QUFDNUMsZ0JBQWdCLFFBQVE7QUFDeEIsNENBQTRDLFFBQVE7QUFDcEQ7QUFDQTtBQUNBLGdCQUFnQixVQUFVO0FBQzFCLGdCQUFnQixJQUFJO0FBQ3BCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCx1QkFBdUIsUUFBUTtBQUMvQiw4QkFBOEIsUUFBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMENBQTBDO0FBQ3ZFO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQzs7QUNuSXNCO0FBQ2E7QUFDVztBQUNSO0FBQ0U7QUFDRjtBQUNnQjtBQUNUO0FBQzdDO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUixJQUFJLEtBQUs7QUFDVCxJQUFJLGNBQWM7QUFDbEIsSUFBSSxPQUFPO0FBQ1gsSUFBSSxXQUFXO0FBQ2Y7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2FuZC8uL3NyYy90aGVtZS5qcz9jYzM3Iiwid2VicGFjazovL3NhbmQvLi9zcmMvdGFzay5qcz83YzExIiwid2VicGFjazovL3NhbmQvLi9zcmMvc2NyZWVuLmpzPzIzOGMiLCJ3ZWJwYWNrOi8vc2FuZC8uL3NyYy9zYXZlJmxvYWQuanM/NDFiOSIsIndlYnBhY2s6Ly9zYW5kLy4vc3JjL3Byb2plY3QuanM/ZjU5YiIsIndlYnBhY2s6Ly9zYW5kLy4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHRoZW1lID0gKCgpID0+IHtcclxuICAgIGNvbnN0IHRoZW1lVG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b2dnbGVyXCIpXHJcbiAgICB0aGVtZVRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRlc3QgPSBkb2N1bWVudC5ib2R5LmRhdGFzZXQudGhlbWVcclxuICAgICAgICBpZiAodGVzdCA9PT0gYGApIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnRoZW1lID0gXCJkYXJrXCJcclxuICAgICAgICAgICAgdGhlbWVUb2dnbGUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwibWRpIG1kaS13aGl0ZS1iYWxhbmNlLXN1bm55XCI+PC9zcGFuPmBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmRhdGFzZXQudGhlbWUgPSBcIlwiXHJcbiAgICAgICAgICAgIHRoZW1lVG9nZ2xlLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cIm1kaSBtZGktd2VhdGhlci1uaWdodFwiPjwvc3Bhbj5gXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufSkiLCJpbXBvcnQgeyBwcm9qZWN0RGF0YSwgcHJvamVjdEZpbmlzaCB9IGZyb20gXCIuL3Byb2plY3QuanNcIlxyXG5pbXBvcnQgeyBzYXZlIH0gZnJvbSBcIi4vc2F2ZSZsb2FkLmpzXCJcclxuaW1wb3J0IHsgdXBkYXRlR3JpZCB9IGZyb20gXCIuL3NjcmVlbi5qc1wiXHJcbmV4cG9ydCBjb25zdCB0YXNrRGF0YSA9IFtdXHJcbmV4cG9ydCBjb25zdCB0YXNrSWQgPSB7IHZhbHVlOiAwIH1cclxuXHJcbmV4cG9ydCBjb25zdCB0YXNrQ29udHJvbCA9ICgoKSA9PiB7XHJcbiAgICBjbGFzcyB0YXNrIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcihuYW1lLCBwcm9qZWN0LCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGltcG9ydGFuY2UsIGR1ZURhdGUsIGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWVcclxuICAgICAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdFxyXG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5XHJcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0YW5jZSA9IGltcG9ydGFuY2VcclxuICAgICAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZVxyXG4gICAgICAgICAgICB0aGlzLmlkID0gaWRcclxuICAgICAgICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlXHJcbiAgICAgICAgICAgIHRoaXMuZGx0ID0gYDxzcGFuIGNsYXNzPVwibWRpIG1kaS1kZWxldGUtb3V0bGluZVwiPjwvc3Bhbj5gXHJcbiAgICAgICAgICAgIHRoaXMuZWRpdCA9IGA8c3BhbiBjbGFzcz1cIm1kaSBtZGktZGVsZXRlLW91dGxpbmVcIj48L3NwYW4+YFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhZGRUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRfdGFza1wiKVxyXG4gICAgY29uc3QgdGFza19kaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RpYWxvZ1wiKVxyXG5cclxuICAgIGFkZFRhc2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBpZiAocHJvamVjdERhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwiWW91IG11c3QgY3JlYXRlIGEgcHJvamVjdCBmaXJzdFwiKVxyXG4gICAgICAgICAgICBjb25zdCBhZGRQcm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZF9wcm9qZWN0XCIpXHJcbiAgICAgICAgICAgIGFkZFByby5jbGljaygpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFza19kaWFsb2cuaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgIGA8Zm9ybSBhY3Rpb249XCIjXCIgY2xhc3M9XCJmb3JtXCIgaWQ9XCJmb3JtXCI+XHJcbiAgICAgICAgICAgIDxoMT5DcmVhdGUgVGFzazwvaDE+XHJcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJuYW1lXCI+VGl0bGU6PC9sYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgcmVxdWlyZWQgYXV0b2ZvY3VzIGlkPVwibmFtZVwiIG1heGxlbmd0aD1cIjIwXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJkZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uOjwvbGFiZWw+XHJcbiAgICAgICAgICAgIDx0ZXh0YXJlYSByZXF1aXJlZCBhdXRvY29tcGxldGU9XCJvZmZcIiBpZD1cImRlc2NyaXB0aW9uXCI+PC90ZXh0YXJlYT5cclxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImR1ZV9kYXRlXCI+RHVlIERhdGU6PC9sYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0IHJlcXVpcmVkIHR5cGU9XCJkYXRlXCIgaWQ9XCJkdWVfZGF0ZVwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwicHJpb3JpdHlcIj5Qcmlvcml0eTo8L2xhYmVsPlxyXG4gICAgICAgICAgICA8c2VsZWN0IHJlcXVpcmVkIGlkPVwicHJpb3JpdHlcIj5cclxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIiBkaXNhYmxlZCBzZWxlY3RlZD5TZWxlY3QgUHJpb3JpdHk8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJub25lXCI+Tm9uZTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImxvd1wiPkxvdzwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm1pZFwiPk1pZDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImhpZ2hcIj5IaWdoPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiY3JpdFwiPkNyaXRpY2FsPC9vcHRpb24+XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFza19wcm9qZWN0XCI+UHJvamVjdDo8L2xhYmVsPlxyXG4gICAgICAgICAgICA8c2VsZWN0IHJlcXVpcmVkIGlkPVwidGFza19wcm9qZWN0XCI+XHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCIgZGlzYWJsZWQgc2VsZWN0ZWQ+U2VsZWN0IFByb2plY3Q8L29wdGlvbj4ke3Byb2plY3RPcHRpb25zKCl9XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgPGxhYmVsIGZvcj1cImltcG9ydGFuY2VcIj5JbXBvcnRhbnQ6PC9sYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiaW1wb3J0YW5jZVwiPlxyXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5BZGQgVGFzazwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjbG9zZVwiIGlkPVwiY2xvc2VfZGlhXCI+PHNwYW4gY2xhc3M9XCJtZGkgbWRpLWNsb3NlXCI+PC9zcGFuPjwvZGl2PmBcclxuICAgICAgICAgICAgdGFza19kaWFsb2cuY2xhc3NMaXN0LnRvZ2dsZShcInRhc2tEaWFcIiwgdHJ1ZSlcclxuICAgICAgICAgICAgdGFza19kaWFsb2cuc2hvd01vZGFsKClcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZV9kaWFcIilcclxuICAgICAgICAgICAgY29uc3QgdGFza19mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtXCIpXHJcbiAgICAgICAgICAgIHRhc2tfZGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSB0YXNrX2RpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhc2tfZGlhbG9nLmNsb3NlKClcclxuICAgICAgICAgICAgICAgICAgICB0YXNrX2RpYWxvZy5jbGFzc0xpc3QudG9nZ2xlKFwidGFza0RpYVwiLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRhc2tfZGlhbG9nLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIHRhc2tfZGlhbG9nLmNsYXNzTGlzdC50b2dnbGUoXCJ0YXNrRGlhXCIsIGZhbHNlKVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgdGFza19mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgY3JlYXRlVGFzaygpXHJcbiAgICAgICAgICAgICAgICB0YXNrX2Zvcm0ucmVzZXQoKVxyXG4gICAgICAgICAgICAgICAgdGFza19kaWFsb2cuY2xvc2UoKVxyXG4gICAgICAgICAgICAgICAgdGFza19kaWFsb2cuY2xhc3NMaXN0LnRvZ2dsZShcInRhc2tEaWFcIiwgZmFsc2UpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVUYXNrKCkge1xyXG4gICAgICAgIGNvbnN0IHRhc2tOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpXHJcbiAgICAgICAgY29uc3QgdGFza0Rlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpXHJcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2R1ZV9kYXRlXCIpXHJcbiAgICAgICAgY29uc3QgdGFza1ByaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5XCIpXHJcbiAgICAgICAgY29uc3QgdGFza1Byb2ogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tfcHJvamVjdFwiKVxyXG4gICAgICAgIGNvbnN0IHRhc2tJbXBvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbXBvcnRhbmNlXCIpXHJcblxyXG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gL15cXHMqJC9nXHJcbiAgICAgICAgY29uc3QgdGVzdCA9IHRhc2tEYXRhLnNvbWUodGFzayA9PiB0YXNrLm5hbWUgPT09IHRhc2tOYW1lLnZhbHVlLnRyaW0oKSlcclxuICAgICAgICBpZiAocmVnZXgudGVzdCh0YXNrTmFtZS52YWx1ZS50cmltKCkpIHx8IHRlc3QpIHtcclxuICAgICAgICAgICAgYWxlcnQoXCJBIFRhc2sgV2l0aCBUaGUgU2FtZSBOYW1lIEV4aXN0c1xcbk9yIFlvdSBFbnRlcmVkIEFuIEludmFsaWQgTmFtZVxcblBsZWFzZSBFbnRlciBBbm90aGVyIE5hbWVcIilcclxuICAgICAgICAgICAgdGFza05hbWUudmFsdWUgPSBgYFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRzayA9IG5ldyB0YXNrKHRhc2tOYW1lLnZhbHVlLCB0YXNrUHJvai52YWx1ZSwgdGFza0Rlc2MudmFsdWUsIHRhc2tQcmlvLnZhbHVlLCB0YXNrSW1wby5jaGVja2VkLCBuZXcgRGF0ZSh0YXNrRGF0ZS52YWx1ZSksIHRhc2tJZC52YWx1ZSlcclxuICAgICAgICAgICAgdGFza0RhdGEucHVzaCh0c2spXHJcbiAgICAgICAgICAgIHRhc2tJZC52YWx1ZSsrXHJcbiAgICAgICAgICAgIHNhdmUoKVxyXG4gICAgICAgICAgICB1cGRhdGVHcmlkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlXCIpKVxyXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0XCIpKVxyXG4gICAgICAgICAgICBjb25zdCBwcm8gPSBwcm9qZWN0cy5maW5kKHBybyA9PiBwcm8ucXVlcnlTZWxlY3RvcihcInBcIikudGV4dENvbnRlbnQgPT09IHRzay5wcm9qZWN0KVxyXG4gICAgICAgICAgICBwcm9qZWN0RmluaXNoKHBybylcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pXHJcblxyXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcclxuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xyXG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUYXNrKHRhc2spIHtcclxuICAgIGNvbnN0IHRhc2tDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrX2NvbnRlbnRcIilcclxuICAgIGNvbnN0IHRhc2tDYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgdGFza0NhcmQuY2xhc3NOYW1lID0gXCJ0YXNrLWNhcmRcIlxyXG4gICAgdGFza0NhcmQuZGF0YXNldC50YXNrSWQgPSB0YXNrLmlkXHJcbiAgICB0YXNrQ2FyZC5pbm5lckhUTUwgPVxyXG4gICAgICAgIGA8ZGl2IGNsYXNzPVwidGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8cD4ke3Rhc2submFtZX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0bnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcyA9IFwidGFzay1maW5pc2hlZFwiIHRpdGxlID0gXCJGaW5pc2hlZFwiPjxzcGFuIGNsYXNzPVwibWRpIG1kaS1jaGVjay1kZWNhZ3JhbS1vdXRsaW5lXCI+PC9zcGFuPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke3Rhc2suaW1wb3J0YW5jZSA/IGA8ZGl2IGNsYXNzPVwiaW1wbyBmbGFnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1kaSBtZGktc3RhclwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YCA6IGA8ZGl2IGNsYXNzPVwiaW1wb1wiIGlkPVwiaW1wb1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZGkgbWRpLXN0YXItb3V0bGluZVwiPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlZGl0LXRhc2tcIj48c3BhbiBjbGFzcz1cIm1kaSBtZGktcGVuY2lsXCI+PC9zcGFuPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGx0LXRhc2tcIj48c3BhbiBjbGFzcz1cIm1kaSBtZGktZGVsZXRlLW91dGxpbmVcIj48L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxzcGFuPnByb2plY3Q6ICR7dGFzay5wcm9qZWN0fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YXNrLWRlc2NcIj5cclxuICAgICAgICAgICAgICAgICAgICAke3Rhc2suZGVzY3JpcHRpb259XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByaW8gJHt0YXNrLnByaW9yaXR5fVwiPiR7dGFzay5wcmlvcml0eSA9PT0gXCJjcml0XCIgPyBcIkNyaXRpY2FsXCIgOiB0YXNrLnByaW9yaXR5fTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlXCI+JHtmb3JtYXREYXRlKHRhc2suZHVlRGF0ZSl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvdmVybGF5XCIgJHt0YXNrLmZpbmlzaGVkID8gJ3N0eWxlPVwiZGlzcGxheTogZmxleDtcIicgOiAnJ30+PHNwYW4gY2xhc3M9XCJtZGkgbWRpLWNoZWNrLWRlY2FncmFtXCI+PC9zcGFuPjwvZGl2PmBcclxuICAgIGNvbnN0IGRsdCA9IHRhc2tDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZGx0LXRhc2tcIilcclxuICAgIGRsdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbiA9IGNvbmZpcm0oXCJkbyB5b3UgcmVhbGx5IHdhbnQgdG8gZGVsZXRlIHRoaXMgdGFzaz9cIilcclxuICAgICAgICBpZiAoY29uZmlybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9IHRhc2tEYXRhLmZpbmRJbmRleCh0YXNrID0+IHRhc2suaWQgPT09IE51bWJlcih0YXNrQ2FyZC5kYXRhc2V0LnRhc2tJZCkpXHJcbiAgICAgICAgICAgIHRhc2tEYXRhLnNwbGljZShyZW1vdmUsIDEpXHJcbiAgICAgICAgICAgIHNhdmUoKVxyXG4gICAgICAgICAgICB0YXNrQ2FyZC5yZW1vdmUoKVxyXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0XCIpKVxyXG4gICAgICAgICAgICBjb25zdCBwcm8gPSBwcm9qZWN0cy5maW5kKHBybyA9PiBwcm8ucXVlcnlTZWxlY3RvcihcInBcIikudGV4dENvbnRlbnQgPT09IHRhc2sucHJvamVjdClcclxuICAgICAgICAgICAgcHJvamVjdEZpbmlzaChwcm8pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIGNvbnN0IGltcG9ydGFuY2UgPSB0YXNrQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmltcG9cIilcclxuICAgIGltcG9ydGFuY2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgaW1wbyA9IHRhc2tEYXRhLmZpbmQodGFzayA9PiB0YXNrLmlkID09PSBOdW1iZXIodGFza0NhcmQuZGF0YXNldC50YXNrSWQpKVxyXG4gICAgICAgIGlmIChpbXBvcnRhbmNlLmNsYXNzTGlzdC5jb250YWlucyhcImZsYWdcIikpIHtcclxuICAgICAgICAgICAgaW1wb3J0YW5jZS5jbGFzc0xpc3QudG9nZ2xlKFwiZmxhZ1wiKVxyXG4gICAgICAgICAgICBpbXBvcnRhbmNlLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cIm1kaSBtZGktc3Rhci1vdXRsaW5lXCI+PC9zcGFuPmBcclxuICAgICAgICAgICAgaW1wby5pbXBvcnRhbmNlID0gIWltcG8uaW1wb3J0YW5jZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGltcG9ydGFuY2UuY2xhc3NMaXN0LnRvZ2dsZShcImZsYWdcIilcclxuICAgICAgICAgICAgaW1wb3J0YW5jZS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJtZGkgbWRpLXN0YXJcIj48L3NwYW4+YFxyXG4gICAgICAgICAgICBpbXBvLmltcG9ydGFuY2UgPSAhaW1wby5pbXBvcnRhbmNlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNhdmUoKVxyXG4gICAgICAgIHVwZGF0ZUdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY3RpdmVcIikpXHJcbiAgICB9KVxyXG4gICAgY29uc3QgZmluaXNoID0gdGFza0NhcmQucXVlcnlTZWxlY3RvcihcIi50YXNrLWZpbmlzaGVkXCIpXHJcbiAgICBmaW5pc2guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG4gICAgICAgIHRhc2suZmluaXNoZWQgPSB0cnVlXHJcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdFwiKSlcclxuICAgICAgICBjb25zdCBwcm8gPSBwcm9qZWN0cy5maW5kKHBybyA9PiBwcm8ucXVlcnlTZWxlY3RvcihcInBcIikudGV4dENvbnRlbnQgPT09IHRhc2sucHJvamVjdClcclxuICAgICAgICBwcm9qZWN0RmluaXNoKHBybylcclxuICAgICAgICBzYXZlKClcclxuICAgIH0pXHJcbiAgICBjb25zdCBvdmVybGF5ID0gdGFza0NhcmQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpXHJcbiAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJcIlxyXG4gICAgICAgIHRhc2suZmluaXNoZWQgPSBmYWxzZVxyXG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3RcIikpXHJcbiAgICAgICAgY29uc3QgcHJvID0gcHJvamVjdHMuZmluZChwcm8gPT4gcHJvLnF1ZXJ5U2VsZWN0b3IoXCJwXCIpLnRleHRDb250ZW50ID09PSB0YXNrLnByb2plY3QpXHJcbiAgICAgICAgcHJvamVjdEZpbmlzaChwcm8pXHJcbiAgICAgICAgc2F2ZSgpXHJcbiAgICB9KVxyXG4gICAgY29uc3QgZWRpdFRhc2sgPSB0YXNrQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFza1wiKVxyXG4gICAgZWRpdFRhc2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGVkaXRUYXNrRGF0YSlcclxuICAgIHRhc2tDb250ZW50LmFwcGVuZENoaWxkKHRhc2tDYXJkKVxyXG59XHJcblxyXG5mdW5jdGlvbiBlZGl0VGFza0RhdGEoZSkge1xyXG4gICAgY29uc3QgdGFza19kaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RpYWxvZ1wiKVxyXG4gICAgY29uc3QgdGFza0NhcmQgPSBlLnRhcmdldC5jbG9zZXN0KFwiLnRhc2stY2FyZFwiKVxyXG4gICAgY29uc3QgdGFzayA9IHRhc2tEYXRhLmZpbmQodGFzayA9PiB0YXNrLmlkID09PSBOdW1iZXIodGFza0NhcmQuZGF0YXNldC50YXNrSWQpKVxyXG4gICAgY29uc3QgZm9ybWF0dGVkRHVlRGF0ZSA9IHRhc2suZHVlRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cclxuICAgIHRhc2tfZGlhbG9nLmlubmVySFRNTCA9XHJcbiAgICAgICAgYDxmb3JtIGFjdGlvbj1cIiNcIiBjbGFzcz1cImZvcm1cIiBpZD1cImZvcm1cIj5cclxuICAgICAgICAgICAgPGgxPkVkaXQgVGFzazwvaDE+XHJcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJuYW1lXCI+VGl0bGU6PC9sYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgcmVxdWlyZWQgYXV0b2ZvY3VzIGlkPVwibmFtZVwiIG1heGxlbmd0aD1cIjIwXCIgdmFsdWU9XCIke3Rhc2submFtZX1cIj5cclxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImRlc2NyaXB0aW9uXCI+RGVzY3JpcHRpb246PC9sYWJlbD5cclxuICAgICAgICAgICAgPHRleHRhcmVhIHJlcXVpcmVkIGF1dG9jb21wbGV0ZT1cIm9mZlwiIGlkPVwiZGVzY3JpcHRpb25cIiA+JHt0YXNrLmRlc2NyaXB0aW9ufTwvdGV4dGFyZWE+XHJcbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJkdWVfZGF0ZVwiPkR1ZSBEYXRlOjwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dCByZXF1aXJlZCB0eXBlPVwiZGF0ZVwiIGlkPVwiZHVlX2RhdGVcIiB2YWx1ZT1cIiR7Zm9ybWF0dGVkRHVlRGF0ZX1cIj5cclxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInByaW9yaXR5XCI+UHJpb3JpdHk6PC9sYWJlbD5cclxuICAgICAgICAgICAgPHNlbGVjdCByZXF1aXJlZCBpZD1cInByaW9yaXR5XCI+XHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCIgZGlzYWJsZWQgPlNlbGVjdCBQcmlvcml0eTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm5vbmVcIiAke3Rhc2sucHJpb3JpdHkgPT09IFwibm9uZVwiID8gXCJzZWxlY3RlZFwiIDogXCJcIn0gPk5vbmU8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJsb3dcIiAke3Rhc2sucHJpb3JpdHkgPT09IFwibG93XCIgPyBcInNlbGVjdGVkXCIgOiBcIlwifT5Mb3c8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJtaWRcIiAke3Rhc2sucHJpb3JpdHkgPT09IFwibWlkXCIgPyBcInNlbGVjdGVkXCIgOiBcIlwifT5NaWQ8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJoaWdoXCIgJHt0YXNrLnByaW9yaXR5ID09PSBcImhpZ2hcIiA/IFwic2VsZWN0ZWRcIiA6IFwiXCJ9PkhpZ2g8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJjcml0XCIgJHt0YXNrLnByaW9yaXR5ID09PSBcImNyaXRcIiA/IFwic2VsZWN0ZWRcIiA6IFwiXCJ9PkNyaXRpY2FsPC9vcHRpb24+XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwidGFza19wcm9qZWN0XCI+UHJvamVjdDo8L2xhYmVsPlxyXG4gICAgICAgICAgICA8c2VsZWN0IHJlcXVpcmVkIGlkPVwidGFza19wcm9qZWN0XCI+XHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCIgZGlzYWJsZWQgc2VsZWN0ZWQ+U2VsZWN0IFByb2plY3Q8L29wdGlvbj4ke3Byb2plY3RPcHRpb25zKCl9XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgPGxhYmVsIGZvcj1cImltcG9ydGFuY2VcIj5JbXBvcnRhbnQ6PC9sYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiaW1wb3J0YW5jZVwiICR7dGFzay5pbXBvcnRhbmNlID8gJ2NoZWNrZWQnIDogJyd9PlxyXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5FZGl0IFRhc2s8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2xvc2VcIiBpZD1cImNsb3NlX2RpYVwiPjxzcGFuIGNsYXNzPVwibWRpIG1kaS1jbG9zZVwiPjwvc3Bhbj48L2Rpdj5gXHJcbiAgICB0YXNrX2RpYWxvZy5jbGFzc0xpc3QudG9nZ2xlKFwidGFza0RpYVwiLCB0cnVlKVxyXG4gICAgdGFza19kaWFsb2cuc2hvd01vZGFsKClcclxuXHJcbiAgICBjb25zdCBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2VfZGlhXCIpXHJcbiAgICBjb25zdCB0YXNrX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1cIilcclxuICAgIGNvbnN0IGVkaXRfaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIilcclxuICAgIHRhc2tfZGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gdGFza19kaWFsb2cpIHtcclxuICAgICAgICAgICAgdGFza19kaWFsb2cuY2xvc2UoKVxyXG4gICAgICAgICAgICB0YXNrX2RpYWxvZy5jbGFzc0xpc3QudG9nZ2xlKFwidGFza0RpYVwiLCBmYWxzZSlcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0YXNrX2RpYWxvZy5jbG9zZSgpXHJcbiAgICAgICAgdGFza19kaWFsb2cuY2xhc3NMaXN0LnRvZ2dsZShcInRhc2tEaWFcIiwgZmFsc2UpXHJcbiAgICB9KVxyXG5cclxuICAgIHRhc2tfZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgZWRpdFRhc2tTZWxlY3RlZChlZGl0X2lucHV0LnZhbHVlLnRyaW0oKSwgdGFza0NhcmQsIHRhc2spXHJcbiAgICAgICAgdGFza19mb3JtLnJlc2V0KClcclxuICAgICAgICB0YXNrX2RpYWxvZy5jbG9zZSgpXHJcbiAgICAgICAgdGFza19kaWFsb2cuY2xhc3NMaXN0LnRvZ2dsZShcInRhc2tEaWFcIiwgZmFsc2UpXHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBlZGl0VGFza1NlbGVjdGVkKG5ld05hbWUsIHRhc2tDYXJkLCB0YXNrKSB7XHJcbiAgICBjb25zdCB0YXNrTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKVxyXG4gICAgY29uc3QgdGFza0Rlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpXHJcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZHVlX2RhdGVcIilcclxuICAgIGNvbnN0IHRhc2tQcmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmlvcml0eVwiKVxyXG4gICAgY29uc3QgdGFza1Byb2ogPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tfcHJvamVjdFwiKVxyXG4gICAgY29uc3QgdGFza0ltcG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltcG9ydGFuY2VcIilcclxuXHJcbiAgICBjb25zdCB0ZXN0ID0gdGFza0RhdGEuc29tZSh0YXNrID0+IHRhc2submFtZSA9PT0gbmV3TmFtZS50cmltKCkpXHJcbiAgICBjb25zdCByZWdleCA9IC9eXFxzKiQvXHJcblxyXG4gICAgaWYgKHRlc3QgfHwgcmVnZXgudGVzdChuZXdOYW1lKSkge1xyXG4gICAgICAgIGFsZXJ0KFwiQSBQcm9qZWN0IFdpdGggVGhlIFNhbWUgTmFtZSBFeGlzdHNcXG5PciBZb3UgRW50ZXJlZCBBbiBJbnZhbGlkIE5hbWVcXG5QbGVhc2UgRW50ZXIgQW5vdGhlciBOYW1lXCIpXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpLnZhbHVlID0gYGBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGFzay5uYW1lID0gdGFza05hbWUudmFsdWUudHJpbSgpXHJcbiAgICAgICAgdGFzay5pbXBvcnRhbmNlID0gdGFza0ltcG8uY2hlY2tlZFxyXG4gICAgICAgIHRhc2sucHJvamVjdCA9IHRhc2tQcm9qLnZhbHVlLnRyaW0oKVxyXG4gICAgICAgIHRhc2suZGVzY3JpcHRpb24gPSB0YXNrRGVzYy52YWx1ZS50cmltKClcclxuICAgICAgICB0YXNrLnByaW9yaXR5ID0gdGFza1ByaW8udmFsdWVcclxuICAgICAgICB0YXNrLmRhdGUgPSBuZXcgRGF0ZSh0YXNrRGF0ZS52YWx1ZSlcclxuICAgICAgICBzYXZlKClcclxuICAgICAgICB0YXNrQ2FyZC5pbm5lckhUTUwgPVxyXG4gICAgICAgICAgICBgPGRpdiBjbGFzcz1cInRpdGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+JHt0YXNrLm5hbWV9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJidG5zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3MgPSBcInRhc2stZmluaXNoZWRcIiB0aXRsZSA9IFwiRmluaXNoZWRcIj48c3BhbiBjbGFzcz1cIm1kaSBtZGktY2hlY2stZGVjYWdyYW0tb3V0bGluZVwiPjwvc3Bhbj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0YXNrLmltcG9ydGFuY2UgPyBgPGRpdiBjbGFzcz1cImltcG8gZmxhZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZGkgbWRpLXN0YXJcIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmAgOiBgPGRpdiBjbGFzcz1cImltcG9cIiBpZD1cImltcG9cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWRpIG1kaS1zdGFyLW91dGxpbmVcIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZWRpdC10YXNrXCI+PHNwYW4gY2xhc3M9XCJtZGkgbWRpLXBlbmNpbFwiPjwvc3Bhbj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRsdC10YXNrXCI+PHNwYW4gY2xhc3M9XCJtZGkgbWRpLWRlbGV0ZS1vdXRsaW5lXCI+PC9zcGFuPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8c3Bhbj5wcm9qZWN0OiAke3Rhc2sucHJvamVjdH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1kZXNjXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgJHt0YXNrLmRlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mb1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmlvICR7dGFzay5wcmlvcml0eX1cIj4ke3Rhc2sucHJpb3JpdHkgPT09IFwiY3JpdFwiID8gXCJDcml0aWNhbFwiIDogdGFzay5wcmlvcml0eX08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZVwiPiR7Zm9ybWF0RGF0ZSh0YXNrLmR1ZURhdGUpfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3ZlcmxheVwiICR7dGFzay5maW5pc2hlZCA/ICdzdHlsZT1cImRpc3BsYXk6IGZsZXg7XCInIDogJyd9PjxzcGFuIGNsYXNzPVwibWRpIG1kaS1jaGVjay1kZWNhZ3JhbVwiPjwvc3Bhbj48L2Rpdj5gXHJcbiAgICAgICAgY29uc3QgZGx0ID0gdGFza0NhcmQucXVlcnlTZWxlY3RvcihcIi5kbHQtdGFza1wiKVxyXG4gICAgICAgIGRsdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb25maXJtYXRpb24gPSBjb25maXJtKFwiZG8geW91IHJlYWxseSB3YW50IHRvIGRlbGV0ZSB0aGlzIHRhc2s/XCIpXHJcbiAgICAgICAgICAgIGlmIChjb25maXJtYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9IHRhc2tEYXRhLmZpbmRJbmRleCh0YXNrID0+IHRhc2suaWQgPT09IE51bWJlcih0YXNrQ2FyZC5kYXRhc2V0LnRhc2tJZCkpXHJcbiAgICAgICAgICAgICAgICB0YXNrRGF0YS5zcGxpY2UocmVtb3ZlLCAxKVxyXG4gICAgICAgICAgICAgICAgc2F2ZSgpXHJcbiAgICAgICAgICAgICAgICB0YXNrQ2FyZC5yZW1vdmUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCBpbXBvcnRhbmNlID0gdGFza0NhcmQucXVlcnlTZWxlY3RvcihcIi5pbXBvXCIpXHJcbiAgICAgICAgaW1wb3J0YW5jZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW1wbyA9IHRhc2tEYXRhLmZpbmQodGFzayA9PiB0YXNrLmlkID09PSBOdW1iZXIodGFza0NhcmQuZGF0YXNldC50YXNrSWQpKVxyXG4gICAgICAgICAgICBpZiAoaW1wb3J0YW5jZS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGFnXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpbXBvcnRhbmNlLmNsYXNzTGlzdC50b2dnbGUoXCJmbGFnXCIpXHJcbiAgICAgICAgICAgICAgICBpbXBvcnRhbmNlLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cIm1kaSBtZGktc3Rhci1vdXRsaW5lXCI+PC9zcGFuPmBcclxuICAgICAgICAgICAgICAgIGltcG8uaW1wb3J0YW5jZSA9ICFpbXBvLmltcG9ydGFuY2VcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGltcG9ydGFuY2UuY2xhc3NMaXN0LnRvZ2dsZShcImZsYWdcIilcclxuICAgICAgICAgICAgICAgIGltcG9ydGFuY2UuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwibWRpIG1kaS1zdGFyXCI+PC9zcGFuPmBcclxuICAgICAgICAgICAgICAgIGltcG8uaW1wb3J0YW5jZSA9ICFpbXBvLmltcG9ydGFuY2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzYXZlKClcclxuICAgICAgICAgICAgdXBkYXRlR3JpZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjdGl2ZVwiKSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IGZpbmlzaCA9IHRhc2tDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1maW5pc2hlZFwiKVxyXG4gICAgICAgIGZpbmlzaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG4gICAgICAgICAgICB0YXNrLmZpbmlzaGVkID0gdHJ1ZVxyXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0XCIpKVxyXG4gICAgICAgICAgICBjb25zdCBwcm8gPSBwcm9qZWN0cy5maW5kKHBybyA9PiBwcm8ucXVlcnlTZWxlY3RvcihcInBcIikudGV4dENvbnRlbnQgPT09IHRhc2sucHJvamVjdClcclxuICAgICAgICAgICAgcHJvamVjdEZpbmlzaChwcm8pXHJcbiAgICAgICAgICAgIHNhdmUoKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRhc2tDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKVxyXG4gICAgICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJcIlxyXG4gICAgICAgICAgICB0YXNrLmZpbmlzaGVkID0gZmFsc2VcclxuICAgICAgICAgICAgY29uc3QgcHJvamVjdHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdFwiKSlcclxuICAgICAgICAgICAgY29uc3QgcHJvID0gcHJvamVjdHMuZmluZChwcm8gPT4gcHJvLnF1ZXJ5U2VsZWN0b3IoXCJwXCIpLnRleHRDb250ZW50ID09PSB0YXNrLnByb2plY3QpXHJcbiAgICAgICAgICAgIHByb2plY3RGaW5pc2gocHJvKVxyXG4gICAgICAgICAgICBzYXZlKClcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IGVkaXRUYXNrID0gdGFza0NhcmQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRhc2tcIilcclxuICAgICAgICBlZGl0VGFzay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZWRpdFRhc2tEYXRhKVxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVwiKS5yZXNldCgpXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkaWFsb2dcIikuY2xvc2UoKVxyXG4gICAgICAgIHVwZGF0ZUdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY3RpdmVcIikpXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHByb2plY3RPcHRpb25zID0gZnVuY3Rpb24gdHVyblByb2plY3RzSW50b09wdGlvbnMoKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0gcHJvamVjdERhdGEubWFwKHBybyA9PiBgPG9wdGlvbiB2YWx1ZT1cIiR7cHJvLm5hbWV9XCI+JHtwcm8ubmFtZX08L29wdGlvbj5gKVxyXG4gICAgcmV0dXJuIG9wdGlvbnMuam9pbihcIlwiKVxyXG59IiwiaW1wb3J0IHsgcHJvamVjdERhdGEgfSBmcm9tIFwiLi9wcm9qZWN0LmpzXCJcclxuaW1wb3J0IHsgc2F2ZSB9IGZyb20gXCIuL3NhdmUmbG9hZC5qc1wiXHJcbmltcG9ydCB7IHRhc2tEYXRhLCByZW5kZXJUYXNrIH0gZnJvbSBcIi4vdGFzay5qc1wiXHJcblxyXG5leHBvcnQgY29uc3QgZGlzcGxheSA9ICgoKSA9PiB7XHJcbiAgICB1cGRhdGVOYXYoKVxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdFwiKSlcclxuICAgICAgICBjb25zdCB0YWJzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhYlwiKSlcclxuICAgICAgICBzd2l0Y2ggKGUudGFyZ2V0LmNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwicHJvamVjdFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwidGFiXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJwcm9qZWN0IGZpbmlzaGVkXCI6XHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0cy5mb3JFYWNoKHBybyA9PiBwcm8uY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiLCBmYWxzZSkpXHJcbiAgICAgICAgICAgICAgICB0YWJzLmZvckVhY2godGFiID0+IHRhYi5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIsIGZhbHNlKSlcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIiwgdHJ1ZSlcclxuICAgICAgICAgICAgICAgIHVwZGF0ZU5hdigpXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVHcmlkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlXCIpKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59KVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUdyaWQodGFiKSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrX2NvbnRlbnRcIilcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxyXG4gICAgY29uc3Qgb25lV2Vla0Zyb21Ob3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUoKVxyXG4gICAgc3dpdGNoICh0YWIuaWQpIHtcclxuICAgICAgICBjYXNlIFwiYWxsX3Rhc2tzXCI6XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gYGBcclxuICAgICAgICAgICAgdGFza0RhdGEuZm9yRWFjaCh0YXNrID0+IHJlbmRlclRhc2sodGFzaykpXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWN0aXZlXCIpLmNsaWNrKClcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInRvZGF5X3Rhc2tzXCI6XHJcbiAgICAgICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gYGBcclxuICAgICAgICAgICAgY29uc3QgdG9kYXlUYXNrcyA9IHRhc2tEYXRhLmZpbHRlcih0YXNrID0+IHRhc2suZHVlRGF0ZS5nZXREYXRlKCkgPT09IHRvZGF5LmdldERhdGUoKSAmJiB0YXNrLmR1ZURhdGUuZ2V0TW9udGgoKSA9PT0gdG9kYXkuZ2V0TW9udGgoKSAmJiB0YXNrLmR1ZURhdGUuZ2V0RnVsbFllYXIoKSA9PT0gdG9kYXkuZ2V0RnVsbFllYXIoKSlcclxuICAgICAgICAgICAgdG9kYXlUYXNrcy5mb3JFYWNoKHRhc2sgPT4gcmVuZGVyVGFzayh0YXNrKSlcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInRoaXNfd2Vla190YXNrc1wiOlxyXG4gICAgICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IGBgXHJcbiAgICAgICAgICAgIG9uZVdlZWtGcm9tTm93LnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpICsgNylcclxuICAgICAgICAgICAgeWVzdGVyZGF5LnNldERhdGUodG9kYXkuZ2V0RGF0ZSgpLTEpXHJcbiAgICAgICAgICAgIGNvbnN0IHdlZWtUYXNrcyA9IHRhc2tEYXRhLmZpbHRlcih0YXNrID0+IHRhc2suZHVlRGF0ZSA+PSB5ZXN0ZXJkYXkgJiYgdGFzay5kdWVEYXRlIDw9IG9uZVdlZWtGcm9tTm93KVxyXG4gICAgICAgICAgICB3ZWVrVGFza3MuZm9yRWFjaCh0YXNrID0+IHJlbmRlclRhc2sodGFzaykpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJpbXBvcnRhbnRfdGFza3NcIjpcclxuICAgICAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgYFxyXG4gICAgICAgICAgICBjb25zdCBpbXBvcnRhbnRUYXNrcyA9IHRhc2tEYXRhLmZpbHRlcih0YXNrID0+IHRhc2suaW1wb3J0YW5jZSA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgaW1wb3J0YW50VGFza3MuZm9yRWFjaCh0YXNrID0+IHJlbmRlclRhc2sodGFzaykpXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgaWYgKHRhYi5jbGFzc0xpc3QuY29udGFpbnMoXCJwcm9qZWN0XCIpKSB7XHJcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgYFxyXG4gICAgICAgIGNvbnN0IHByb2plY3RUYXNrcyA9IHRhc2tEYXRhLmZpbHRlcih0YXNrID0+IHRhc2sucHJvamVjdCA9PT0gdGFiLnF1ZXJ5U2VsZWN0b3IoXCJwXCIpLnRleHRDb250ZW50KVxyXG4gICAgICAgIHByb2plY3RUYXNrcy5mb3JFYWNoKHRhc2sgPT4gcmVuZGVyVGFzayh0YXNrKSlcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTmF2KCkge1xyXG4gICAgY29uc3QgbmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYXZiYXJcIilcclxuICAgIGNvbnN0IFNlbGVjdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY3RpdmVcIilcclxuICAgIGlmIChTZWxlY3RlZC5jbGFzc0xpc3QuY29udGFpbnMoXCJwcm9qZWN0XCIpKSB7XHJcbiAgICAgICAgbmF2YmFyLmlubmVySFRNTCA9IGA8aDE+PHNwYW4gY2xhc3M9XCJlZGl0IG1kaSBtZGktcGVuY2lsXCI+PC9zcGFuPiAke1NlbGVjdGVkLnRleHRDb250ZW50LnRyaW0oKX08L2gxPmBcclxuICAgICAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYXZiYXIgLmVkaXRcIilcclxuICAgICAgICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlZGl0KVxyXG4gICAgfSBlbHNlIGlmIChTZWxlY3RlZC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YWJcIikpIHtcclxuICAgICAgICBuYXZiYXIuaW5uZXJIVE1MID0gYDxoMT4ke1NlbGVjdGVkLnRleHRDb250ZW50LnRyaW0oKX08L2gxPmBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmF2YmFyLmlubmVySFRNTCA9IGBgXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVkaXQoKSB7XHJcbiAgICBjb25zdCBlZGl0X3Byb2plY3RfZGlhbG9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkaWFsb2dcIilcclxuICAgIGVkaXRfcHJvamVjdF9kaWFsb2cuaW5uZXJIVE1MID0gYDxmb3JtIGFjdGlvbj1cIiNcIiBpZD1cImZvcm1cIiBjbGFzcz1cImZvcm1cIj5cclxuICAgIDxoMT5FZGl0IFByb2plY3Q8L2gxPlxyXG4gICAgPGxhYmVsIGZvcj1cIm5hbWVcIj5FZGl0IE5hbWU8L2xhYmVsPlxyXG4gICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgcmVxdWlyZWQgYXV0b2ZvY3VzIGlkPVwibmFtZVwiIG1heGxlbmd0aD1cIjIwXCI+XHJcbiAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5FZGl0IFByb2plY3Q8L2J1dHRvbj5cclxuICAgIDwvZm9ybT5cclxuICAgIDxkaXYgY2xhc3M9XCJjbG9zZVwiIGlkPVwiY2xvc2VfZGlhXCI+PHNwYW4gY2xhc3M9XCJtZGkgbWRpLWNsb3NlXCI+PC9zcGFuPjwvZGl2PmBcclxuICAgIGVkaXRfcHJvamVjdF9kaWFsb2cuc2hvd01vZGFsKClcclxuICAgIGNvbnN0IGVkaXRfcHJvamVjdF9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtXCIpXHJcbiAgICBjb25zdCBlZGl0X2lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpXHJcbiAgICBjb25zdCBjbG9zZV9lZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZV9kaWFcIilcclxuXHJcbiAgICBlZGl0X3Byb2plY3RfZGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gZWRpdF9wcm9qZWN0X2RpYWxvZykge1xyXG4gICAgICAgICAgICBlZGl0X3Byb2plY3RfZGlhbG9nLmNsb3NlKClcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgY2xvc2VfZWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGVkaXRfcHJvamVjdF9kaWFsb2cuY2xvc2UoKVxyXG4gICAgfSlcclxuXHJcbiAgICBlZGl0X3Byb2plY3RfZm9ybS5vbnN1Ym1pdCA9IChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgZWRpdFNlbGVjdGlvbihlZGl0X2lucHV0LnZhbHVlLnRyaW0oKSlcclxuICAgICAgICBzYXZlKClcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZWRpdFNlbGVjdGlvbihuZXdOYW1lKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdF9jb250ZW50XCIpXHJcbiAgICBjb25zdCB0ZXN0ID0gcHJvamVjdERhdGEuc29tZShwcm8gPT4gcHJvLm5hbWUgPT09IG5ld05hbWUudHJpbSgpKVxyXG4gICAgY29uc3QgcmVnZXggPSAvXlxccyokL1xyXG5cclxuICAgIGlmICh0ZXN0IHx8IHJlZ2V4LnRlc3QobmV3TmFtZSkpIHtcclxuICAgICAgICBhbGVydChcIkEgUHJvamVjdCBXaXRoIFRoZSBTYW1lIE5hbWUgRXhpc3RzXFxuT3IgWW91IEVudGVyZWQgQW4gSW52YWxpZCBOYW1lXFxuUGxlYXNlIEVudGVyIEFub3RoZXIgTmFtZVwiKVxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKS52YWx1ZSA9IGBgXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0cy5xdWVyeVNlbGVjdG9yKFwiLmFjdGl2ZVwiKVxyXG4gICAgICAgIGNvbnN0IHBybyA9IHByb2plY3REYXRhLmZpbmQocHJvID0+IHByby5pZCA9PT0gTnVtYmVyKHByb2plY3QuZGF0YXNldC5wcm9qZWN0SWQpKVxyXG4gICAgICAgIHByby5uYW1lID0gU3RyaW5nKG5ld05hbWUudHJpbSgpKVxyXG4gICAgICAgIGNvbnN0IHRzayA9IHRhc2tEYXRhLmZvckVhY2godGFzayA9PiB0YXNrLnByb2plY3QgPT09IHByb2plY3QucXVlcnlTZWxlY3RvcihcInBcIikudGV4dENvbnRlbnQgPyB0YXNrLnByb2plY3QgPSBTdHJpbmcobmV3TmFtZS50cmltKCkpOiB0YXNrKVxyXG4gICAgICAgIHByb2plY3QucXVlcnlTZWxlY3RvcihcInBcIikudGV4dENvbnRlbnQgPSBuZXdOYW1lLnRyaW0oKVxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVwiKS5yZXNldCgpXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkaWFsb2dcIikuY2xvc2UoKVxyXG4gICAgICAgIHNhdmUoKVxyXG4gICAgICAgIHVwZGF0ZU5hdigpXHJcbiAgICAgICAgdXBkYXRlR3JpZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjdGl2ZVwiKSlcclxuICAgIH1cclxufSIsImltcG9ydCB7IHByb2plY3REYXRhLCBwcm9qZWN0SWQsIHJlbmRlciB9IGZyb20gXCIuL3Byb2plY3QuanNcIjtcclxuaW1wb3J0IHsgdXBkYXRlR3JpZCB9IGZyb20gXCIuL3NjcmVlbi5qc1wiO1xyXG5pbXBvcnQgeyB0YXNrRGF0YSwgdGFza0lkIH0gZnJvbSBcIi4vdGFzay5qc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhdmUoKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3REYXRhXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3REYXRhKSlcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdElkXCIsIEpTT04uc3RyaW5naWZ5KHByb2plY3RJZCkpXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRhc2tJZFwiLCBKU09OLnN0cmluZ2lmeSh0YXNrSWQpKVxyXG4gICAgY29uc3QgdGFza0RhdGFXaXRoU3RyaW5nRGF0ZXMgPSB0YXNrRGF0YS5tYXAodGFzayA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4udGFzaywgZHVlRGF0ZTogdGFzay5kdWVEYXRlLnRvSVNPU3RyaW5nKCkgfVxyXG4gICAgfSlcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrRGF0YScsIEpTT04uc3RyaW5naWZ5KHRhc2tEYXRhV2l0aFN0cmluZ0RhdGVzKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsb2FkKCkge1xyXG4gICAgY29uc3Qgc2F2ZWRQcm9qZWN0RGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0RGF0YScpXHJcbiAgICBjb25zdCBzYXZlZFByb2plY3RJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0SWQnKVxyXG4gICAgY29uc3Qgc2F2ZWRUYXNrSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0lkJylcclxuICAgIGNvbnN0IHNhdmVkVGFza0RhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza0RhdGEnKVxyXG5cclxuICAgIGlmIChzYXZlZFByb2plY3RJZCkge1xyXG4gICAgICAgIHByb2plY3RJZC52YWx1ZSA9IEpTT04ucGFyc2Uoc2F2ZWRQcm9qZWN0SWQpLnZhbHVlXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNhdmVkVGFza0lkKSB7XHJcbiAgICAgICAgdGFza0lkLnZhbHVlID0gSlNPTi5wYXJzZShzYXZlZFRhc2tJZCkudmFsdWVcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2F2ZWRUYXNrRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZFRhc2tEYXRhID0gSlNPTi5wYXJzZShzYXZlZFRhc2tEYXRhKVxyXG4gICAgICAgIGNvbnN0IHRhc2tEYXRhV2l0aERhdGVPYmpzID0gcGFyc2VkVGFza0RhdGEubWFwKHRhc2sgPT4geyByZXR1cm4geyAuLi50YXNrLCBkdWVEYXRlOiBuZXcgRGF0ZSh0YXNrLmR1ZURhdGUpIH0gfSlcclxuICAgICAgICB0YXNrRGF0YS5wdXNoKC4uLnRhc2tEYXRhV2l0aERhdGVPYmpzKVxyXG4gICAgICAgIHVwZGF0ZUdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY3RpdmVcIikpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNhdmVkUHJvamVjdERhdGEpIHtcclxuICAgICAgICBwcm9qZWN0RGF0YS5wdXNoKC4uLkpTT04ucGFyc2Uoc2F2ZWRQcm9qZWN0RGF0YSkpXHJcbiAgICAgICAgcHJvamVjdERhdGEuZm9yRWFjaChwcm8gPT4gcmVuZGVyKHBybykpXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBzYXZlIH0gZnJvbSBcIi4vc2F2ZSZsb2FkLmpzXCJcclxuaW1wb3J0IHsgdXBkYXRlR3JpZCB9IGZyb20gXCIuL3NjcmVlbi5qc1wiXHJcbmltcG9ydCB7IHRhc2tEYXRhIH0gZnJvbSBcIi4vdGFzay5qc1wiXHJcblxyXG5leHBvcnQgY29uc3QgcHJvamVjdERhdGEgPSBbXVxyXG5leHBvcnQgY29uc3QgcHJvamVjdElkID0geyB2YWx1ZTogMCB9XHJcblxyXG5leHBvcnQgY29uc3QgcHJvamVjdENvbnRyb2wgPSAoKCkgPT4ge1xyXG4gICAgY2xhc3MgcHJvamVjdCB7XHJcbiAgICAgICAgY29uc3RydWN0b3IobmFtZSwgaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZVxyXG4gICAgICAgICAgICB0aGlzLmRsdCA9IGA8c3BhbiBjbGFzcz1cIm1kaSBtZGktZGVsZXRlLW91dGxpbmVcIj48L3NwYW4+YFxyXG4gICAgICAgICAgICB0aGlzLmlkID0gaWRcclxuICAgICAgICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRfcHJvamVjdFwiKVxyXG4gICAgY29uc3QgcHJvamVjdF9kaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RpYWxvZ1wiKVxyXG5cclxuICAgIGFkZFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBwcm9qZWN0X2RpYWxvZy5pbm5lckhUTUwgPSBgPGZvcm0gYWN0aW9uPVwiI1wiIGlkPVwiZm9ybVwiIGNsYXNzPVwiZm9ybVwiPlxyXG4gICAgICAgIDxoMT5DcmVhdGUgUHJvamVjdDwvaDE+XHJcbiAgICAgICAgPGxhYmVsIGZvcj1cIm5hbWVcIj5Qcm9qZWN0IE5hbWU8L2xhYmVsPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiIHJlcXVpcmVkIGF1dG9mb2N1cyBpZD1cIm5hbWVcIiBtYXhsZW5ndGg9XCIyMFwiPlxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPkFkZCBQcm9qZWN0PC9idXR0b24+XHJcbiAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjbG9zZVwiIGlkPVwiY2xvc2VfZGlhXCI+PHNwYW4gY2xhc3M9XCJtZGkgbWRpLWNsb3NlXCI+PC9zcGFuPjwvZGl2PmBcclxuICAgICAgICBwcm9qZWN0X2RpYWxvZy5zaG93TW9kYWwoKVxyXG5cclxuICAgICAgICBjb25zdCBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2VfZGlhXCIpXHJcbiAgICAgICAgY29uc3QgcHJvamVjdF9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtXCIpXHJcbiAgICAgICAgcHJvamVjdF9kaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCA9PT0gcHJvamVjdF9kaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgIHByb2plY3RfZGlhbG9nLmNsb3NlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgcHJvamVjdF9kaWFsb2cuY2xvc2UoKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHByb2plY3RfZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICBjcmVhdGVQcm9qZWN0KClcclxuICAgICAgICAgICAgc2F2ZSgpXHJcbiAgICAgICAgICAgIHByb2plY3RfZm9ybS5yZXNldCgpXHJcbiAgICAgICAgICAgIHByb2plY3RfZGlhbG9nLmNsb3NlKClcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0KCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpXHJcbiAgICAgICAgY29uc3QgcmVnZXggPSAvXlxccyokL2dcclxuICAgICAgICBjb25zdCB0ZXN0ID0gcHJvamVjdERhdGEuc29tZShwcm9qZWN0ID0+IHByb2plY3QubmFtZSA9PT0gaW5wdXQudmFsdWUudHJpbSgpKVxyXG4gICAgICAgIGlmIChyZWdleC50ZXN0KGlucHV0LnZhbHVlLnRyaW0oKSkgfHwgdGVzdCkge1xyXG4gICAgICAgICAgICBhbGVydChcIkEgUHJvamVjdCBXaXRoIFRoZSBTYW1lIE5hbWUgRXhpc3RzXFxuT3IgWW91IEVudGVyZWQgQW4gSW52YWxpZCBOYW1lXFxuUGxlYXNlIEVudGVyIEFub3RoZXIgTmFtZVwiKVxyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGBgXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvID0gbmV3IHByb2plY3QoaW5wdXQudmFsdWUudHJpbSgpLCBwcm9qZWN0SWQudmFsdWUpO1xyXG4gICAgICAgICAgICBwcm9qZWN0RGF0YS5wdXNoKHBybylcclxuICAgICAgICAgICAgcHJvamVjdElkLnZhbHVlKytcclxuICAgICAgICAgICAgc2F2ZSgpXHJcbiAgICAgICAgICAgIHJlbmRlcihwcm8pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSlcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIocHJvKSB7XHJcbiAgICBjb25zdCBwcm9qZWN0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdF9jb250ZW50XCIpXHJcbiAgICBjb25zdCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXHJcbiAgICBjb25zdCBkbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICBwcm9qZWN0LmlubmVySFRNTCArPVxyXG4gICAgICAgIGA8c3ZnIGNsYXNzPVwiY2lyY2xlXCIgaWQ9XCJwaWVDaGFydFwiPjxjaXJjbGUgY2xhc3M9XCJmaWxsXCIvPjwvc3ZnPmBcclxuICAgIHByb2plY3QuY2xhc3NOYW1lID0gXCJwcm9qZWN0XCJcclxuICAgIHByb2plY3QuZGF0YXNldC5wcm9qZWN0SWQgPSBwcm8uaWRcclxuICAgIG5hbWUudGV4dENvbnRlbnQgPSBwcm8ubmFtZVxyXG4gICAgZGx0LmlubmVySFRNTCA9IHByby5kbHRcclxuICAgIGRsdC5jbGFzc05hbWUgPSBcImRsdFwiXHJcbiAgICBkbHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBjb25zdCBjb25maXJtYXRpb24gPSBjb25maXJtKFwiRG8geW91IHJlYWxseSB3YW50IHRvIGRlbGV0ZSB0aGlzIHByb2plY3Q/XCIpXHJcbiAgICAgICAgaWYgKGNvbmZpcm1hdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCBjb25maXJtYXRpb24yID0gY29uZmlybShcIllvdSB3aWxsIGFsc28gcmVtb3ZlIGFsbCBhc3Nvc2lhdGVkIFRBU0tzIHdpdGggdGhpcyBwcm9qZWN0XCIpXHJcbiAgICAgICAgICAgIGlmIChjb25maXJtYXRpb24yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdmUgPSBwcm9qZWN0RGF0YS5maW5kSW5kZXgocHJvID0+IHByby5pZCA9PT0gTnVtYmVyKHByb2plY3QuZGF0YXNldC5wcm9qZWN0SWQpKVxyXG4gICAgICAgICAgICAgICAgcHJvamVjdERhdGEuc3BsaWNlKHJlbW92ZSwgMSlcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rhc2tEYXRhID0gdGFza0RhdGEuZmlsdGVyKHRhc2sgPT4gdGFzay5wcm9qZWN0ICE9PSBwcm9qZWN0LnF1ZXJ5U2VsZWN0b3IoXCJwXCIpLnRleHRDb250ZW50KVxyXG4gICAgICAgICAgICAgICAgdGFza0RhdGEubGVuZ3RoID0gMFxyXG4gICAgICAgICAgICAgICAgbmV3VGFza0RhdGEuZm9yRWFjaCh0YXNrID0+IHRhc2tEYXRhLnB1c2godGFzaykpXHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0LnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0RGF0YS5sZW5ndGggPT09IDAgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhYlwiKS5jbGljaygpIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0XCIpLmNsaWNrKClcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUdyaWQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY3RpdmVcIikpXHJcbiAgICAgICAgICAgICAgICBzYXZlKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBwcm9qZWN0LmFwcGVuZENoaWxkKG5hbWUpXHJcbiAgICBwcm9qZWN0LmFwcGVuZENoaWxkKGRsdClcclxuICAgIHByb2plY3RDb250ZW50LmFwcGVuZENoaWxkKHByb2plY3QpXHJcbiAgICBwcm9qZWN0RmluaXNoKHByb2plY3QpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0RmluaXNoKHBybykge1xyXG4gICAgY29uc3QgdGFza3NDb3VudCA9IHRhc2tEYXRhLmZpbHRlcih0YXNrID0+IHRhc2sucHJvamVjdCA9PT0gcHJvLnF1ZXJ5U2VsZWN0b3IoXCJwXCIpLnRleHRDb250ZW50KS5sZW5ndGhcclxuICAgIGNvbnN0IHRhc2tGaW5pc2hlZENvdW50ID0gdGFza0RhdGEuZmlsdGVyKHRhc2sgPT4gdGFzay5wcm9qZWN0ID09PSBwcm8ucXVlcnlTZWxlY3RvcihcInBcIikudGV4dENvbnRlbnQgJiYgdGFzay5maW5pc2hlZCA9PT0gdHJ1ZSkubGVuZ3RoXHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdERhdGEuZmluZChwcm9qID0+IHByb2oubmFtZSA9PT0gcHJvLnF1ZXJ5U2VsZWN0b3IoXCJwXCIpLnRleHRDb250ZW50KVxyXG4gICAgaWYgKHRhc2tzQ291bnQgPT09IDApIHtcclxuICAgICAgICBwcm8uY2xhc3NMaXN0LnRvZ2dsZShcImZpbmlzaGVkXCIsIGZhbHNlKVxyXG4gICAgICAgIHByb2plY3QuZmluaXNoZWQgPSBmYWxzZVxyXG4gICAgICAgIGNvbnN0IGNpcmNsZSA9IHByby5xdWVyeVNlbGVjdG9yKFwic3ZnIGNpcmNsZVwiKVxyXG4gICAgICAgIGNvbnN0IHN2ZyA9IHByby5xdWVyeVNlbGVjdG9yKFwic3ZnXCIpXHJcbiAgICAgICAgc3ZnLnN0eWxlLmJvcmRlciA9IGBgXHJcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcInN0cm9rZS1kYXNob2Zmc2V0XCIsIGA1NXB4YClcclxuICAgIH0gZWxzZSBpZiAodGFza3NDb3VudCA+IDAgJiYgdGFza3NDb3VudCAhPT0gdGFza0ZpbmlzaGVkQ291bnQpIHtcclxuICAgICAgICBwcm9qZWN0LmZpbmlzaGVkID0gZmFsc2VcclxuICAgICAgICBwcm8uY2xhc3NMaXN0LnRvZ2dsZShcImZpbmlzaGVkXCIsIGZhbHNlKVxyXG4gICAgICAgIGNvbnN0IGNpcmNsZSA9IHByby5xdWVyeVNlbGVjdG9yKFwic3ZnIGNpcmNsZVwiKVxyXG4gICAgICAgIGNvbnN0IHN2ZyA9IHByby5xdWVyeVNlbGVjdG9yKFwic3ZnXCIpXHJcbiAgICAgICAgc3ZnLnN0eWxlLmJvcmRlciA9IGBgXHJcbiAgICAgICAgY29uc3QgbmV3T2Zmc2V0ID0gYCR7NTUgKiAoMSAtIHRhc2tGaW5pc2hlZENvdW50IC8gdGFza3NDb3VudCl9cHhgXHJcbiAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcInN0cm9rZS1kYXNob2Zmc2V0XCIsIG5ld09mZnNldClcclxuICAgIH0gZWxzZSBpZiAodGFza3NDb3VudCA9PT0gdGFza0ZpbmlzaGVkQ291bnQpIHtcclxuICAgICAgICBwcm9qZWN0LmZpbmlzaGVkID0gdHJ1ZVxyXG4gICAgICAgIHByby5jbGFzc0xpc3QudG9nZ2xlKFwiZmluaXNoZWRcIiwgdHJ1ZSlcclxuICAgICAgICBjb25zdCBjaXJjbGUgPSBwcm8ucXVlcnlTZWxlY3RvcihcInN2ZyBjaXJjbGVcIilcclxuICAgICAgICBjb25zdCBzdmcgPSBwcm8ucXVlcnlTZWxlY3RvcihcInN2Z1wiKVxyXG4gICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaG9mZnNldFwiLCBgMHB4YClcclxuICAgICAgICBzdmcuc3R5bGUuYm9yZGVyID0gYDJweCBzb2xpZCB2YXIoLS1zZWNvbmRyeS1iZylgXHJcbiAgICB9IFxyXG59IiwiaW1wb3J0IFwiLi9zdHlsZXMuY3NzXCI7XHJcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSBcIi4vdGhlbWUuanNcIjtcclxuaW1wb3J0IHsgcHJvamVjdENvbnRyb2wgfSBmcm9tIFwiLi9wcm9qZWN0LmpzXCI7XHJcbmltcG9ydCB7IGRpc3BsYXkgfSBmcm9tIFwiLi9zY3JlZW4uanNcIjtcclxuaW1wb3J0IHsgdGFza0NvbnRyb2wgfSBmcm9tIFwiLi90YXNrLmpzXCI7XHJcbmltcG9ydCB7IGxvYWQgfSBmcm9tIFwiLi9zYXZlJmxvYWQuanNcIjtcclxuaW1wb3J0IHsgcHJvamVjdERhdGEsIHByb2plY3RJZCB9IGZyb20gXCIuL3Byb2plY3QuanNcIjtcclxuaW1wb3J0IHsgdGFza0RhdGEsIHRhc2tJZCB9IGZyb20gXCIuL3Rhc2suanNcIjtcclxuXHJcbmZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICBsb2FkKClcclxuICAgIHRoZW1lKClcclxuICAgIHByb2plY3RDb250cm9sKClcclxuICAgIGRpc3BsYXkoKVxyXG4gICAgdGFza0NvbnRyb2woKVxyXG59XHJcblxyXG5pbml0KCkiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///134\n')}},__webpack_exports__={};__webpack_modules__[134]()})();